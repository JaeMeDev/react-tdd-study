## 1. 여행 상품 판매 앱 소개

리액트만이 아닌 노드를 이용한 백엔드 서버와 통신도 하는 부분을 테스트 할 예정.

주문페이지, 확인페이지 등을 만들어본다.

## 2. 새로운 프로젝트 Setup

1. cra 생성
2. eslint, prettier setup

## 3. 전체적인 구조 만들기

- Client
    - pages
        - OrderPage
            - OrderPage
            - tests
        - SummaryPage
            - SummaryPage
            - tests
        - CompletePage
            - CompletePage
            - tests
    - components
- Server

## 4. Summary 페이지 Form 구현

실제 개발에서 구현할 때는 첫페이지부터 할 것 같지만 첫 페이지가 가장 복잡하기 때문에 간단한 부분부터 시작한다.

1. 해야할 일은? → 주문 확인 체크 박스를 눌러야만 주문 확인 버튼을 누를 수 있다.
2. 테스트 작성
3. 테스트 실행(Fail)
4. 코드 작성

## 5. 첫 번째 페이지 구현을 위해서 해야 할 일

## 6. Mock Service Worker

백엔드에서 데이터를 가져오는 부분을 테스트하기 위해서는 실제로 서버에 호출하는 end-to-end 테스트를 할 수 있지만 여기서는 서버에 요청을 보낼 때 그 요청을 가로채서 Mock Service Worker라는 것으로 요청을 처리하고 모의 응답(mocked response)을 보내주겠다.

### MSW 작동 방식

브라우저에서 서비스 워커를 등록하여 외부로 나가는 네트워크 리퀘스트를 감지한다. 그리고 그 요청을 실제 서버로 갈 때 중간에 가로채서(intercept) MSW 클라이언트 사이드 라이브러리로 보낸다. 그 후 등록된 핸들러에서 요청을 처리한 후 모두의 응답을 브라우저로 보낸다.

브라우저와 통합하는 방법과 노드와 통합하는 방법 두가지 방법이 있지만 노드와 통합하는 방식을 사용한다.

1. msw 설치 : npm i msw —save
2. 핸들러를 생성한다. (핸들러 Type은 Rest 또는 Graphql)
    1. req :매칭 요청에 대한 정보
    2. res 모의 응답을 생성하는 기능적 유틸리티
    3. ctx : 모의 응답의 상태코드, 헤더, 본문 등을 설정하는 데 도움이 되는 함수 그룹
3. 서버 생성
4. API mocking
    1. beforeAll : 서버를 모든 테스트 전에 시작 → server.listen()
    2. afterEach : 하나하나의 테스터 이후에 리셋 → server.resetHandlers()
    3. afterAll : 모든 테스트가 끝나면 서버 종료 → server.close()

## 7. 8. MSW를 이용한 테스트(상품 이미지 가져오기)

1. Type 파일 생성
2. Type.test.js 파일 생성
3. Products 파일 생성

1. 해야할일은? → 서버에서 여행 상품 이미지를 가져온다.
2. 테스트 작성
3. 실패
4. 성공

## 9. 서버에서 데이터 가져올 때 에러 발생 시 처리

1. 해야할 일은? → 서버에서 에러 발생시 문구를 표출하자.
2. 테스트 작성
3. 테스트 실행(Fail)
4. 테스트 성공 코드 구현

## 10. 옵션 정보 가져오기

1. 해야할 일은? → 서버에서 옵션 정보를 가져온다.
2. 테스트 작성
3. 테스트 실행(Fail)
4. 테스트 성공 코드 구현

## 11. UI를 위한 작업

1. 해야할 일은? → 전체적인 틀을 만든다.
2. 코드 작성
3. 확인
